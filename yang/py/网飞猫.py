# coding = utf-8
# !/usr/bin/python

"""

‰ΩúËÄÖ ÁπÅÂçé üöì ÂÜÖÂÆπÂùá‰ªé‰∫íËÅîÁΩëÊî∂ÈõÜËÄåÊù• ‰ªÖ‰æõ‰∫§ÊµÅÂ≠¶‰π†‰ΩøÁî® ÁâàÊùÉÂΩíÂéüÂàõËÄÖÊâÄÊúâ Â¶Ç‰æµÁäØ‰∫ÜÊÇ®ÁöÑÊùÉÁõä ËØ∑ÈÄöÁü•‰ΩúËÄÖ Â∞ÜÂèäÊó∂Âà†Èô§‰æµÊùÉÂÜÖÂÆπ
                    ====================fanhua====================

"""

from Crypto.Util.Padding import unpad
from urllib.parse import unquote
from Crypto.Cipher import ARC4
from urllib.parse import quote
from base.spider import Spider
from bs4 import BeautifulSoup
import urllib.request
import urllib.parse
import binascii
import requests
import base64
import json
import time
import sys
import re
import os

sys.path.append('..')

xurl = "https://www.ncat21.com"

headerx = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.87 Safari/537.36'
          }

# headerx = {
#     'User-Agent': 'Linux; Android 12; Pixel 3 XL) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.101 Mobile Safari/537.36'
#           }

pm = ''

class Spider(Spider):
    global xurl
    global headerx

    def getName(self):
        return "È¶ñÈ°µ"

    def init(self, extend):
        pass

    def isVideoFormat(self, url):
        pass

    def manualVideoCheck(self):
        pass

    def extract_middle_text(self, text, start_str, end_str, pl, start_index1: str = '', end_index2: str = ''):
        if pl == 3:
            plx = []
            while True:
                start_index = text.find(start_str)
                if start_index == -1:
                    break
                end_index = text.find(end_str, start_index + len(start_str))
                if end_index == -1:
                    break
                middle_text = text[start_index + len(start_str):end_index]
                plx.append(middle_text)
                text = text.replace(start_str + middle_text + end_str, '')
            if len(plx) > 0:
                purl = ''
                for i in range(len(plx)):
                    matches = re.findall(start_index1, plx[i])
                    output = ""
                    for match in matches:
                        match3 = re.search(r'(?:^|[^0-9])(\d+)(?:[^0-9]|$)', match[1])
                        if match3:
                            number = match3.group(1)
                        else:
                            number = 0
                        if 'http' not in match[0]:
                            output += f"#{match[1]}${number}{xurl}{match[0]}"
                        else:
                            output += f"#{match[1]}${number}{match[0]}"
                    output = output[1:]
                    purl = purl + output + "$$$"
                purl = purl[:-3]
                return purl
            else:
                return ""
        else:
            start_index = text.find(start_str)
            if start_index == -1:
                return ""
            end_index = text.find(end_str, start_index + len(start_str))
            if end_index == -1:
                return ""

        if pl == 0:
            middle_text = text[start_index + len(start_str):end_index]
            return middle_text.replace("\\", "")

        if pl == 1:
            middle_text = text[start_index + len(start_str):end_index]
            matches = re.findall(start_index1, middle_text)
            if matches:
                jg = ' '.join(matches)
                return jg

        if pl == 2:
            middle_text = text[start_index + len(start_str):end_index]
            matches = re.findall(start_index1, middle_text)
            if matches:
                new_list = [f'{item}' for item in matches]
                jg = '$$$'.join(new_list)
                return jg

    def homeContent(self, filter):
        result = {}
        result = {"class": [{"type_id": "1", "type_name": "ÁîµÂΩ±üå†"},
                            {"type_id": "2", "type_name": "ÂâßÈõÜüå†"},
                            {"type_id": "3", "type_name": "Âä®Êº´üå†"},
                            {"type_id": "4", "type_name": "ÁªºËâ∫üå†"},
                            {"type_id": "6", "type_name": "Áü≠Ââßüå†"}],

                  "list": [],
                  "filters": {
                      "1": [
                          {
                              "key": "Á±ªÂûã",
                              "name": "Á±ªÂûã",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "ÂâßÊÉÖ",
                                      "v": "ÂâßÊÉÖ"
                                  },
                                  {
                                      "n": "ÂñúÂâß",
                                      "v": "ÂñúÂâß"
                                  },
                                  {
                                      "n": "Âä®‰Ωú",
                                      "v": "Âä®‰Ωú"
                                  },
                                  {
                                      "n": "Áà±ÊÉÖ",
                                      "v": "Áà±ÊÉÖ"
                                  },
                                  {
                                      "n": "ÊÅêÊÄñ",
                                      "v": "ÊÅêÊÄñ"
                                  },
                                  {
                                      "n": "ÊÉäÊÇö",
                                      "v": "ÊÉäÊÇö"
                                  },
                                  {
                                      "n": "ÁäØÁΩ™",
                                      "v": "ÁäØÁΩ™"
                                  },
                                  {
                                      "n": "ÁßëÂπª",
                                      "v": "ÁßëÂπª"
                                  },
                                  {
                                      "n": "ÊÇ¨Áñë",
                                      "v": "ÊÇ¨Áñë"
                                  },
                                  {
                                      "n": "Â•áÂπª",
                                      "v": "Â•áÂπª"
                                  },
                                  {
                                      "n": "ÂÜíÈô©",
                                      "v": "ÂÜíÈô©"
                                  },
                                  {
                                      "n": "Êàò‰∫â",
                                      "v": "Êàò‰∫â"
                                  },
                                  {
                                      "n": "ÂéÜÂè≤",
                                      "v": "ÂéÜÂè≤"
                                  },
                                  {
                                      "n": "Âè§Ë£Ö",
                                      "v": "Âè§Ë£Ö"
                                  },
                                  {
                                      "n": "ÂÆ∂Â∫≠",
                                      "v": "ÂÆ∂Â∫≠"
                                  },
                                  {
                                      "n": "‰º†ËÆ∞",
                                      "v": "‰º†ËÆ∞"
                                  },
                                  {
                                      "n": "Ê≠¶‰æ†",
                                      "v": "Ê≠¶‰æ†"
                                  },
                                  {
                                      "n": "Ê≠åËàû",
                                      "v": "Ê≠åËàû"
                                  },
                                  {
                                      "n": "Áü≠Áâá",
                                      "v": "Áü≠Áâá"
                                  },
                                  {
                                      "n": "Âä®Áîª",
                                      "v": "Âä®Áîª"
                                  },
                                  {
                                      "n": "ÂÑøÁ´•",
                                      "v": "ÂÑøÁ´•"
                                  },
                                  {
                                      "n": "ËÅåÂú∫",
                                      "v": "ËÅåÂú∫"
                                  }
                              ]
                          },
                          {
                              "key": "Âú∞Âå∫",
                              "name": "Âú∞Âå∫",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "Â§ßÈôÜ",
                                      "v": "Â§ßÈôÜ"
                                  },
                                  {
                                      "n": "È¶ôÊ∏Ø",
                                      "v": "È¶ôÊ∏Ø"
                                  },
                                  {
                                      "n": "Âè∞Êπæ",
                                      "v": "Âè∞Êπæ"
                                  },
                                  {
                                      "n": "ÁæéÂõΩ",
                                      "v": "ÁæéÂõΩ"
                                  },
                                  {
                                      "n": "Êó•Êú¨",
                                      "v": "Êó•Êú¨"
                                  },
                                  {
                                      "n": "Èü©ÂõΩ",
                                      "v": "Èü©ÂõΩ"
                                  },
                                  {
                                      "n": "Ëã±ÂõΩ",
                                      "v": "Ëã±ÂõΩ"
                                  },
                                  {
                                      "n": "Ê≥ïÂõΩ",
                                      "v": "Ê≥ïÂõΩ"
                                  },
                                  {
                                      "n": "Âæ∑ÂõΩ",
                                      "v": "Âæ∑ÂõΩ"
                                  },
                                  {
                                      "n": "Âç∞Â∫¶",
                                      "v": "Âç∞Â∫¶"
                                  },
                                  {
                                      "n": "Ê≥∞ÂõΩ",
                                      "v": "Ê≥∞ÂõΩ"
                                  },
                                  {
                                      "n": "‰∏πÈ∫¶",
                                      "v": "‰∏πÈ∫¶"
                                  },
                                  {
                                      "n": "ÁëûÂÖ∏",
                                      "v": "ÁëûÂÖ∏"
                                  },
                                  {
                                      "n": "Â∑¥Ë•ø",
                                      "v": "Â∑¥Ë•ø"
                                  },
                                  {
                                      "n": "Âä†ÊãøÂ§ß",
                                      "v": "Âä†ÊãøÂ§ß"
                                  },
                                  {
                                      "n": "‰øÑÁΩóÊñØ",
                                      "v": "‰øÑÁΩóÊñØ"
                                  },
                                  {
                                      "n": "ÊÑèÂ§ßÂà©",
                                      "v": "ÊÑèÂ§ßÂà©"
                                  },
                                  {
                                      "n": "ÊØîÂà©Êó∂",
                                      "v": "ÊØîÂà©Êó∂"
                                  },
                                  {
                                      "n": "Áà±Â∞îÂÖ∞",
                                      "v": "Áà±Â∞îÂÖ∞"
                                  },
                                  {
                                      "n": "Ë•øÁè≠Áâô",
                                      "v": "Ë•øÁè≠Áâô"
                                  },
                                  {
                                      "n": "Êæ≥Â§ßÂà©‰∫ö",
                                      "v": "Êæ≥Â§ßÂà©‰∫ö"
                                  },
                                  {
                                      "n": "ÂÖ∂‰ªñ",
                                      "v": "ÂÖ∂‰ªñ"
                                  }
                              ]
                          },
                          {
                              "key": "Âπ¥‰ª£",
                              "name": "Âπ¥‰ª£",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "2024",
                                      "v": "2024"
                                  },
                                  {
                                      "n": "2023",
                                      "v": "2023"
                                  },
                                  {
                                      "n": "2022",
                                      "v": "2022"
                                  },
                                  {
                                      "n": "2021",
                                      "v": "2021"
                                  },
                                  {
                                      "n": "2020",
                                      "v": "2020"
                                  },
                                  {
                                      "n": "10Âπ¥‰ª£",
                                      "v": "10Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "00Âπ¥‰ª£",
                                      "v": "00Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "90Âπ¥‰ª£",
                                      "v": "90Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "80Âπ¥‰ª£",
                                      "v": "80Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "Êõ¥Êó©",
                                      "v": "Êõ¥Êó©"
                                  }
                              ]
                          },
                          {
                              "key": "ËØ≠Ë®Ä",
                              "name": "ËØ≠Ë®Ä",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "ÂõΩËØ≠",
                                      "v": "ÂõΩËØ≠"
                                  },
                                  {
                                      "n": "Á≤§ËØ≠",
                                      "v": "Á≤§ËØ≠"
                                  },
                                  {
                                      "n": "Ëã±ËØ≠",
                                      "v": "Ëã±ËØ≠"
                                  },
                                  {
                                      "n": "Êó•ËØ≠",
                                      "v": "Êó•ËØ≠"
                                  },
                                  {
                                      "n": "Èü©ËØ≠",
                                      "v": "Èü©ËØ≠"
                                  },
                                  {
                                      "n": "Ê≥ïËØ≠",
                                      "v": "Ê≥ïËØ≠"
                                  },
                                  {
                                      "n": "ÂÖ∂‰ªñ",
                                      "v": "ÂÖ∂‰ªñ"
                                  }
                              ]
                          },
                          {
                              "key": "ÊéíÂ∫è",
                              "name": "ÊéíÂ∫è",
                              "value": [
                                  {
                                      "n": "ÁªºÂêà",
                                      "v": "ÁªºÂêà"
                                  },
                                  {
                                      "n": "ÊúÄÊñ∞",
                                      "v": "ÊúÄÊñ∞"
                                  },
                                  {
                                      "n": "ÊúÄÁÉ≠",
                                      "v": "ÊúÄÁÉ≠"
                                  },
                                  {
                                      "n": "ËØÑÂàÜ",
                                      "v": "ËØÑÂàÜ"
                                  }
                              ]
                          }
                      ],
                      "2": [
                          {
                              "key": "Á±ªÂûã",
                              "name": "Á±ªÂûã",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "ÂâßÊÉÖ",
                                      "v": "ÂâßÊÉÖ"
                                  },
                                  {
                                      "n": "Áà±ÊÉÖ",
                                      "v": "Áà±ÊÉÖ"
                                  },
                                  {
                                      "n": "ÂñúÂâß",
                                      "v": "ÂñúÂâß"
                                  },
                                  {
                                      "n": "ÁäØÁΩ™",
                                      "v": "ÁäØÁΩ™"
                                  },
                                  {
                                      "n": "ÊÇ¨Áñë",
                                      "v": "ÊÇ¨Áñë"
                                  },
                                  {
                                      "n": "Âè§Ë£Ö",
                                      "v": "Âè§Ë£Ö"
                                  },
                                  {
                                      "n": "Âä®‰Ωú",
                                      "v": "Âä®‰Ωú"
                                  },
                                  {
                                      "n": "ÂÆ∂Â∫≠",
                                      "v": "ÂÆ∂Â∫≠"
                                  },
                                  {
                                      "n": "ÊÉäÊÇö",
                                      "v": "ÊÉäÊÇö"
                                  },
                                  {
                                      "n": "Â•áÂπª",
                                      "v": "Â•áÂπª"
                                  },
                                  {
                                      "n": "ÁæéÂâß",
                                      "v": "ÁæéÂâß"
                                  },
                                  {
                                      "n": "ÁßëÂπª",
                                      "v": "ÁßëÂπª"
                                  },
                                  {
                                      "n": "ÂéÜÂè≤",
                                      "v": "ÂéÜÂè≤"
                                  },
                                  {
                                      "n": "Êàò‰∫â",
                                      "v": "Êàò‰∫â"
                                  },
                                  {
                                      "n": "Èü©Ââß",
                                      "v": "Èü©Ââß"
                                  },
                                  {
                                      "n": "Ê≠¶‰æ†",
                                      "v": "Ê≠¶‰æ†"
                                  },
                                  {
                                      "n": "Ë®ÄÊÉÖ",
                                      "v": "Ë®ÄÊÉÖ"
                                  },
                                  {
                                      "n": "ÊÅêÊÄñ",
                                      "v": "ÊÅêÊÄñ"
                                  },
                                  {
                                      "n": "ÂÜíÈô©",
                                      "v": "ÂÜíÈô©"
                                  },
                                  {
                                      "n": "ÈÉΩÂ∏Ç",
                                      "v": "ÈÉΩÂ∏Ç"
                                  },
                                  {
                                      "n": "ËÅåÂú∫",
                                      "v": "ËÅåÂú∫"
                                  }
                              ]
                          },
                          {
                              "key": "Âú∞Âå∫",
                              "name": "Âú∞Âå∫",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "Â§ßÈôÜ",
                                      "v": "Â§ßÈôÜ"
                                  },
                                  {
                                      "n": "È¶ôÊ∏Ø",
                                      "v": "È¶ôÊ∏Ø"
                                  },
                                  {
                                      "n": "Èü©ÂõΩ",
                                      "v": "Èü©ÂõΩ"
                                  },
                                  {
                                      "n": "ÁæéÂõΩ",
                                      "v": "ÁæéÂõΩ"
                                  },
                                  {
                                      "n": "Êó•Êú¨",
                                      "v": "Êó•Êú¨"
                                  },
                                  {
                                      "n": "Ê≥ïÂõΩ",
                                      "v": "Ê≥ïÂõΩ"
                                  },
                                  {
                                      "n": "Ëã±ÂõΩ",
                                      "v": "Ëã±ÂõΩ"
                                  },
                                  {
                                      "n": "Âæ∑ÂõΩ",
                                      "v": "Âæ∑ÂõΩ"
                                  },
                                  {
                                      "n": "Âè∞Êπæ",
                                      "v": "Âè∞Êπæ"
                                  },
                                  {
                                      "n": "Ê≥∞ÂõΩ",
                                      "v": "Ê≥∞ÂõΩ"
                                  },
                                  {
                                      "n": "Âç∞Â∫¶",
                                      "v": "Âç∞Â∫¶"
                                  },
                                  {
                                      "n": "ÂÖ∂‰ªñ",
                                      "v": "ÂÖ∂‰ªñ"
                                  }
                              ]
                          },
                          {
                              "key": "Âπ¥‰ª£",
                              "name": "Âπ¥‰ª£",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "2024",
                                      "v": "2024"
                                  },
                                  {
                                      "n": "2023",
                                      "v": "2023"
                                  },
                                  {
                                      "n": "2022",
                                      "v": "2022"
                                  },
                                  {
                                      "n": "2021",
                                      "v": "2021"
                                  },
                                  {
                                      "n": "2020",
                                      "v": "2020"
                                  },
                                  {
                                      "n": "10Âπ¥‰ª£",
                                      "v": "10Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "00Âπ¥‰ª£",
                                      "v": "00Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "90Âπ¥‰ª£",
                                      "v": "90Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "80Âπ¥‰ª£",
                                      "v": "80Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "Êõ¥Êó©",
                                      "v": "Êõ¥Êó©"
                                  }
                              ]
                          },
                          {
                              "key": "ËØ≠Ë®Ä",
                              "name": "ËØ≠Ë®Ä",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "ÂõΩËØ≠",
                                      "v": "ÂõΩËØ≠"
                                  },
                                  {
                                      "n": "Á≤§ËØ≠",
                                      "v": "Á≤§ËØ≠"
                                  },
                                  {
                                      "n": "Ëã±ËØ≠",
                                      "v": "Ëã±ËØ≠"
                                  },
                                  {
                                      "n": "Êó•ËØ≠",
                                      "v": "Êó•ËØ≠"
                                  },
                                  {
                                      "n": "Èü©ËØ≠",
                                      "v": "Èü©ËØ≠"
                                  },
                                  {
                                      "n": "Ê≥ïËØ≠",
                                      "v": "Ê≥ïËØ≠"
                                  },
                                  {
                                      "n": "ÂÖ∂‰ªñ",
                                      "v": "ÂÖ∂‰ªñ"
                                  }
                              ]
                          },
                          {
                              "key": "ÊéíÂ∫è",
                              "name": "ÊéíÂ∫è",
                              "value": [
                                  {
                                      "n": "ÁªºÂêà",
                                      "v": "ÁªºÂêà"
                                  },
                                  {
                                      "n": "ÊúÄÊñ∞",
                                      "v": "ÊúÄÊñ∞"
                                  },
                                  {
                                      "n": "ÊúÄÁÉ≠",
                                      "v": "ÊúÄÁÉ≠"
                                  },
                                  {
                                      "n": "ËØÑÂàÜ",
                                      "v": "ËØÑÂàÜ"
                                  }
                              ]
                          }
                      ],
                      "3": [
                          {
                              "key": "Á±ªÂûã",
                              "name": "Á±ªÂûã",
                              "value": [
                                  {
                                      "n": "Âä®ÊÄÅÊº´Áîª",
                                      "v": "Âä®ÊÄÅÊº´Áîª"
                                  },
                                  {
                                      "n": "ÂâßÊÉÖ",
                                      "v": "ÂâßÊÉÖ"
                                  },
                                  {
                                      "n": "Âä®Áîª",
                                      "v": "Âä®Áîª"
                                  },
                                  {
                                      "n": "ÂñúÂâß",
                                      "v": "ÂñúÂâß"
                                  },
                                  {
                                      "n": "ÂÜíÈô©",
                                      "v": "ÂÜíÈô©"
                                  },
                                  {
                                      "n": "Âä®‰Ωú",
                                      "v": "Âä®‰Ωú"
                                  },
                                  {
                                      "n": "Â•áÂπª",
                                      "v": "Â•áÂπª"
                                  },
                                  {
                                      "n": "ÁßëÂπª",
                                      "v": "ÁßëÂπª"
                                  },
                                  {
                                      "n": "ÂÑøÁ´•",
                                      "v": "ÂÑøÁ´•"
                                  },
                                  {
                                      "n": "ÊêûÁ¨ë",
                                      "v": "ÊêûÁ¨ë"
                                  },
                                  {
                                      "n": "Áà±ÊÉÖ",
                                      "v": "Áà±ÊÉÖ"
                                  },
                                  {
                                      "n": "ÂÆ∂Â∫≠",
                                      "v": "ÂÆ∂Â∫≠"
                                  },
                                  {
                                      "n": "Áü≠Áâá",
                                      "v": "Áü≠Áâá"
                                  },
                                  {
                                      "n": "ÁÉ≠Ë°Ä",
                                      "v": "ÁÉ≠Ë°Ä"
                                  },
                                  {
                                      "n": "ÁõäÊô∫",
                                      "v": "ÁõäÊô∫"
                                  },
                                  {
                                      "n": "ÊÇ¨Áñë",
                                      "v": "ÊÇ¨Áñë"
                                  },
                                  {
                                      "n": "ÁªèÂÖ∏",
                                      "v": "ÁªèÂÖ∏"
                                  },
                                  {
                                      "n": "Ê†°Âõ≠",
                                      "v": "Ê†°Âõ≠"
                                  },
                                  {
                                      "n": "Anime",
                                      "v": "Anime"
                                  },
                                  {
                                      "n": "ËøêÂä®",
                                      "v": "ËøêÂä®"
                                  },
                                  {
                                      "n": "‰∫≤Â≠ê",
                                      "v": "‰∫≤Â≠ê"
                                  },
                                  {
                                      "n": "ÈùíÊò•",
                                      "v": "ÈùíÊò•"
                                  },
                                  {
                                      "n": "ÊÅãÁà±",
                                      "v": "ÊÅãÁà±"
                                  },
                                  {
                                      "n": "Ê≠¶‰æ†",
                                      "v": "Ê≠¶‰æ†"
                                  },
                                  {
                                      "n": "ÊÉäÊÇö",
                                      "v": "ÊÉäÊÇö"
                                  }
                              ]
                          },
                          {
                              "key": "Âú∞Âå∫",
                              "name": "Âú∞Âå∫",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "Êó•Êú¨",
                                      "v": "Êó•Êú¨"
                                  },
                                  {
                                      "n": "Â§ßÈôÜ",
                                      "v": "Â§ßÈôÜ"
                                  },
                                  {
                                      "n": "Âè∞Êπæ",
                                      "v": "Âè∞Êπæ"
                                  },
                                  {
                                      "n": "ÁæéÂõΩ",
                                      "v": "ÁæéÂõΩ"
                                  },
                                  {
                                      "n": "È¶ôÊ∏Ø",
                                      "v": "È¶ôÊ∏Ø"
                                  },
                                  {
                                      "n": "Èü©ÂõΩ",
                                      "v": "Èü©ÂõΩ"
                                  },
                                  {
                                      "n": "Ëã±ÂõΩ",
                                      "v": "Ëã±ÂõΩ"
                                  },
                                  {
                                      "n": "Ê≥ïÂõΩ",
                                      "v": "Ê≥ïÂõΩ"
                                  },
                                  {
                                      "n": "Âæ∑ÂõΩ",
                                      "v": "Âæ∑ÂõΩ"
                                  },
                                  {
                                      "n": "Âç∞Â∫¶",
                                      "v": "Âç∞Â∫¶"
                                  },
                                  {
                                      "n": "Ê≥∞ÂõΩ",
                                      "v": "Ê≥∞ÂõΩ"
                                  },
                                  {
                                      "n": "‰∏πÈ∫¶",
                                      "v": "‰∏πÈ∫¶"
                                  },
                                  {
                                      "n": "ÁëûÂÖ∏",
                                      "v": "ÁëûÂÖ∏"
                                  },
                                  {
                                      "n": "Â∑¥Ë•ø",
                                      "v": "Â∑¥Ë•ø"
                                  },
                                  {
                                      "n": "Âä†ÊãøÂ§ß",
                                      "v": "Âä†ÊãøÂ§ß"
                                  },
                                  {
                                      "n": "‰øÑÁΩóÊñØ",
                                      "v": "‰øÑÁΩóÊñØ"
                                  },
                                  {
                                      "n": "ÊÑèÂ§ßÂà©",
                                      "v": "ÊÑèÂ§ßÂà©"
                                  },
                                  {
                                      "n": "ÊØîÂà©Êó∂",
                                      "v": "ÊØîÂà©Êó∂"
                                  },
                                  {
                                      "n": "Áà±Â∞îÂÖ∞",
                                      "v": "Áà±Â∞îÂÖ∞"
                                  },
                                  {
                                      "n": "Ë•øÁè≠Áâô",
                                      "v": "Ë•øÁè≠Áâô"
                                  },
                                  {
                                      "n": "Êæ≥Â§ßÂà©‰∫ö",
                                      "v": "Êæ≥Â§ßÂà©‰∫ö"
                                  },
                                  {
                                      "n": "ÂÖ∂‰ªñ",
                                      "v": "ÂÖ∂‰ªñ"
                                  }
                              ]
                          },
                          {
                              "key": "Âπ¥‰ª£",
                              "name": "Âπ¥‰ª£",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "2024",
                                      "v": "2024"
                                  },
                                  {
                                      "n": "2023",
                                      "v": "2023"
                                  },
                                  {
                                      "n": "2022",
                                      "v": "2022"
                                  },
                                  {
                                      "n": "2021",
                                      "v": "2021"
                                  },
                                  {
                                      "n": "2020",
                                      "v": "2020"
                                  },
                                  {
                                      "n": "10Âπ¥‰ª£",
                                      "v": "10Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "00Âπ¥‰ª£",
                                      "v": "00Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "90Âπ¥‰ª£",
                                      "v": "90Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "80Âπ¥‰ª£",
                                      "v": "80Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "Êõ¥Êó©",
                                      "v": "Êõ¥Êó©"
                                  }
                              ]
                          },
                          {
                              "key": "ËØ≠Ë®Ä",
                              "name": "ËØ≠Ë®Ä",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "ÂõΩËØ≠",
                                      "v": "ÂõΩËØ≠"
                                  },
                                  {
                                      "n": "Á≤§ËØ≠",
                                      "v": "Á≤§ËØ≠"
                                  },
                                  {
                                      "n": "Ëã±ËØ≠",
                                      "v": "Ëã±ËØ≠"
                                  },
                                  {
                                      "n": "Êó•ËØ≠",
                                      "v": "Êó•ËØ≠"
                                  },
                                  {
                                      "n": "Èü©ËØ≠",
                                      "v": "Èü©ËØ≠"
                                  },
                                  {
                                      "n": "Ê≥ïËØ≠",
                                      "v": "Ê≥ïËØ≠"
                                  },
                                  {
                                      "n": "ÂÖ∂‰ªñ",
                                      "v": "ÂÖ∂‰ªñ"
                                  }
                              ]
                          },
                          {
                              "key": "ÊéíÂ∫è",
                              "name": "ÊéíÂ∫è",
                              "value": [
                                  {
                                      "n": "ÁªºÂêà",
                                      "v": "ÁªºÂêà"
                                  },
                                  {
                                      "n": "ÊúÄÊñ∞",
                                      "v": "ÊúÄÊñ∞"
                                  },
                                  {
                                      "n": "ÊúÄÁÉ≠",
                                      "v": "ÊúÄÁÉ≠"
                                  },
                                  {
                                      "n": "ËØÑÂàÜ",
                                      "v": "ËØÑÂàÜ"
                                  }
                              ]
                          }
                      ],
                      "6": [
                          {
                              "key": "Á±ªÂûã",
                              "name": "Á±ªÂûã",
                              "value": [
                                  {
                                      "n": "Á±ªÂûã",
                                      "v": "Á±ªÂûã"
                                  },
                                  {
                                      "n": "ÈÄÜË¢≠",
                                      "v": "ÈÄÜË¢≠"
                                  },
                                  {
                                      "n": "ÁîúÂÆ†",
                                      "v": "ÁîúÂÆ†"
                                  },
                                  {
                                      "n": "ËôêÊÅã",
                                      "v": "ËôêÊÅã"
                                  },
                                  {
                                      "n": "Á©øË∂ä",
                                      "v": "Á©øË∂ä"
                                  },
                                  {
                                      "n": "ÈáçÁîü",
                                      "v": "ÈáçÁîü"
                                  },
                                  {
                                      "n": "ÂâßÊÉÖ",
                                      "v": "ÂâßÊÉÖ"
                                  },
                                  {
                                      "n": "ÁßëÂπª",
                                      "v": "ÁßëÂπª"
                                  },
                                  {
                                      "n": "Ê≠¶‰æ†",
                                      "v": "Ê≠¶‰æ†"
                                  },
                                  {
                                      "n": "Áà±ÊÉÖ",
                                      "v": "Áà±ÊÉÖ"
                                  },
                                  {
                                      "n": "Âä®‰Ωú",
                                      "v": "Âä®‰Ωú"
                                  },
                                  {
                                      "n": "Êàò‰∫â",
                                      "v": "Êàò‰∫â"
                                  },
                                  {
                                      "n": "ÂÜíÈô©",
                                      "v": "ÂÜíÈô©"
                                  },
                                  {
                                      "n": "ÂÖ∂ÂÆÉ",
                                      "v": "ÂÖ∂ÂÆÉ"
                                  }
                              ]
                          },
                          {
                              "key": "ÊéíÂ∫è",
                              "name": "ÊéíÂ∫è",
                              "value": [
                                  {
                                      "n": "ÁªºÂêà",
                                      "v": "ÁªºÂêà"
                                  },
                                  {
                                      "n": "ÊúÄÊñ∞",
                                      "v": "ÊúÄÊñ∞"
                                  },
                                  {
                                      "n": "ÊúÄÁÉ≠",
                                      "v": "ÊúÄÁÉ≠"
                                  }
                              ]
                          }
                      ],
                      "4": [
                          {
                              "key": "Á±ªÂûã",
                              "name": "Á±ªÂûã",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "Á∫™ÂΩï",
                                      "v": "Á∫™ÂΩï"
                                  },
                                  {
                                      "n": "Áúü‰∫∫ÁßÄ",
                                      "v": "Áúü‰∫∫ÁßÄ"
                                  },
                                  {
                                      "n": "ËÆ∞ÂΩï",
                                      "v": "ËÆ∞ÂΩï"
                                  },
                                  {
                                      "n": "ËÑ±Âè£ÁßÄ",
                                      "v": "ËÑ±Âè£ÁßÄ"
                                  },
                                  {
                                      "n": "ÂâßÊÉÖ",
                                      "v": "ÂâßÊÉÖ"
                                  },
                                  {
                                      "n": "ÂéÜÂè≤",
                                      "v": "ÂéÜÂè≤"
                                  },
                                  {
                                      "n": "ÂñúÂâß",
                                      "v": "ÂñúÂâß"
                                  },
                                  {
                                      "n": "‰º†ËÆ∞",
                                      "v": "‰º†ËÆ∞"
                                  },
                                  {
                                      "n": "Áõ∏Â£∞",
                                      "v": "Áõ∏Â£∞"
                                  },
                                  {
                                      "n": "ËäÇÁõÆ",
                                      "v": "ËäÇÁõÆ"
                                  },
                                  {
                                      "n": "Ê≠åËàû",
                                      "v": "Ê≠åËàû"
                                  },
                                  {
                                      "n": "ÂÜíÈô©",
                                      "v": "ÂÜíÈô©"
                                  },
                                  {
                                      "n": "ËøêÂä®",
                                      "v": "ËøêÂä®"
                                  },
                                  {
                                      "n": "Season",
                                      "v": "Season"
                                  },
                                  {
                                      "n": "ÁäØÁΩ™",
                                      "v": "ÁäØÁΩ™"
                                  },
                                  {
                                      "n": "Áü≠Áâá",
                                      "v": "Áü≠Áâá"
                                  },
                                  {
                                      "n": "ÊêûÁ¨ë",
                                      "v": "ÊêûÁ¨ë"
                                  },
                                  {
                                      "n": "Êôö‰ºö",
                                      "v": "Êôö‰ºö"
                                  }
                              ]
                          },
                          {
                              "key": "Âú∞Âå∫",
                              "name": "Âú∞Âå∫",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "Â§ßÈôÜ",
                                      "v": "Â§ßÈôÜ"
                                  },
                                  {
                                      "n": "È¶ôÊ∏Ø",
                                      "v": "È¶ôÊ∏Ø"
                                  },
                                  {
                                      "n": "Âè∞Êπæ",
                                      "v": "Âè∞Êπæ"
                                  },
                                  {
                                      "n": "ÁæéÂõΩ",
                                      "v": "ÁæéÂõΩ"
                                  },
                                  {
                                      "n": "Êó•Êú¨",
                                      "v": "Êó•Êú¨"
                                  },
                                  {
                                      "n": "Èü©ÂõΩ",
                                      "v": "Èü©ÂõΩ"
                                  },
                                  {
                                      "n": "ÂÖ∂‰ªñ",
                                      "v": "ÂÖ∂‰ªñ"
                                  }
                              ]
                          },
                          {
                              "key": "Âπ¥‰ª£",
                              "name": "Âπ¥‰ª£",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "2024",
                                      "v": "2024"
                                  },
                                  {
                                      "n": "2023",
                                      "v": "2023"
                                  },
                                  {
                                      "n": "2022",
                                      "v": "2022"
                                  },
                                  {
                                      "n": "2021",
                                      "v": "2021"
                                  },
                                  {
                                      "n": "2020",
                                      "v": "2020"
                                  },
                                  {
                                      "n": "10Âπ¥‰ª£",
                                      "v": "10Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "00Âπ¥‰ª£",
                                      "v": "00Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "90Âπ¥‰ª£",
                                      "v": "90Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "80Âπ¥‰ª£",
                                      "v": "80Âπ¥‰ª£"
                                  },
                                  {
                                      "n": "Êõ¥Êó©",
                                      "v": "Êõ¥Êó©"
                                  }
                              ]
                          },
                          {
                              "key": "ËØ≠Ë®Ä",
                              "name": "ËØ≠Ë®Ä",
                              "value": [
                                  {
                                      "n": "ÂÖ®ÈÉ®",
                                      "v": ""
                                  },
                                  {
                                      "n": "ÂõΩËØ≠",
                                      "v": "ÂõΩËØ≠"
                                  },
                                  {
                                      "n": "Á≤§ËØ≠",
                                      "v": "Á≤§ËØ≠"
                                  },
                                  {
                                      "n": "Ëã±ËØ≠",
                                      "v": "Ëã±ËØ≠"
                                  },
                                  {
                                      "n": "Êó•ËØ≠",
                                      "v": "Êó•ËØ≠"
                                  },
                                  {
                                      "n": "Èü©ËØ≠",
                                      "v": "Èü©ËØ≠"
                                  },
                                  {
                                      "n": "Ê≥ïËØ≠",
                                      "v": "Ê≥ïËØ≠"
                                  },
                                  {
                                      "n": "ÂÖ∂‰ªñ",
                                      "v": "ÂÖ∂‰ªñ"
                                  }
                              ]
                          },
                          {
                              "key": "ÊéíÂ∫è",
                              "name": "ÊéíÂ∫è",
                              "value": [
                                  {
                                      "n": "ÁªºÂêà",
                                      "v": "ÁªºÂêà"
                                  },
                                  {
                                      "n": "ÊúÄÊñ∞",
                                      "v": "ÊúÄÊñ∞"
                                  },
                                  {
                                      "n": "ÊúÄÁÉ≠",
                                      "v": "ÊúÄÁÉ≠"
                                  },
                                  {
                                      "n": "ËØÑÂàÜ",
                                      "v": "ËØÑÂàÜ"
                                  }
                              ]
                          }
                      ]
                  }
                  }

        return result

    def homeVideoContent(self):
        videos = []

        try:
            detail = requests.get(url=xurl, headers=headerx)
            detail.encoding = "utf-8"
            res = detail.text

            doc = BeautifulSoup(res, "lxml")

            soups = doc.find_all('div', class_="section-main")
            if len(soups) > 1:
                del soups[1]
            for soup in soups:
                vods = soup.find_all('a')
                for vod in vods:
                    name = self.extract_middle_text(str(vod), '<div class="v-item-title">', '</div>', 0)
                    id = vod['href']
                    pics = vod.find_all('img')
                    pic = 'https://vres1.ipvav.cn' + pics[1]['data-original']
                    remarks = vod.find('div', class_="v-item-bottom")
                    remark = remarks.find('span').text
                    remark = remark.replace('                        ', '').replace('\n                    ', '').replace('\n', '')
                    video = {
                        "vod_id": id,
                        "vod_name":  name,
                        "vod_pic": pic,
                        "vod_remarks":  remark
                             }
                    videos.append(video)
            result = {'list': videos}
            return result
        except:
            pass

    def categoryContent(self, cid, pg, filter, ext):
        result = {}
        videos = []

        if pg:
            page = int(pg)
        else:
            page = 1

        if 'Á±ªÂûã' in ext.keys():
            lxType = ext['Á±ªÂûã']
        else:
            lxType = ''
        if 'Âú∞Âå∫' in ext.keys():
            DqType = ext['Âú∞Âå∫']
        else:
            DqType = ''
        if 'ËØ≠Ë®Ä' in ext.keys():
            YyType = ext['ËØ≠Ë®Ä']
        else:
            YyType = ''
        if 'Âπ¥‰ª£' in ext.keys():
            NdType = ext['Âπ¥‰ª£']
        else:
            NdType = ''
        if 'ÂâßÊÉÖ' in ext.keys():
            JqType = ext['ÂâßÊÉÖ']
        else:
            JqType = ''

        if 'ÊéíÂ∫è' in ext.keys():
            pxType = ext['ÊéíÂ∫è']
        else:
            pxType = ''


            url = f'{xurl}/show/{cid}-{lxType}-{DqType}-{YyType}-{NdType}-{pxType}-{page}.html'


        try:
            detail = requests.get(url=url, headers=headerx)
            detail.encoding = "utf-8"
            res = detail.text
            doc = BeautifulSoup(res, "lxml")

            soups = doc.find_all('div', class_="section-main")

            for soup in soups:
                vods = soup.find_all('a')
                for vod in vods:
                    name = self.extract_middle_text(str(vod), '<div class="v-item-title">', '</div>', 0)
                    id = vod['href']
                    pics = vod.find_all('img')
                    pic = 'https://vres1.ipvav.cn' + pics[1]['data-original']
                    remarks = vod.find('div', class_="v-item-bottom")
                    remark = remarks.find('span').text
                    remark = remark.replace('                        ', '').replace('\n                    ', '').replace('\n', '')

                    video = {
                        "vod_id": id,
                        "vod_name": name,
                        "vod_pic": pic,
                        "vod_remarks":  remark
                            }
                    videos.append(video)
        except:
            pass
        result = {'list': videos}
        result['page'] = pg
        result['pagecount'] = 9999
        result['limit'] = 90
        result['total'] = 999999
        return result
    def detailContent(self, ids):
        global pm
        did = ids[0]
        result = {}
        videos = []
        if 'http' not in did:
            did = xurl + did
        res = requests.get(url=did, headers=headerx)
        res.encoding = "utf-8"
        res = res.text
        tiaozhuan = '0'
        if tiaozhuan == '1':
            didt = self.extract_middle_text(res, 'class="play">', '</p>', 1, 'href="(.*?)"')
            if 'http' not in didt:
                didt = xurl + didt
                ress = requests.get(url=didt, headers=headerx)
                ress.encoding = "utf-8"
                ress = ress.text
        duoxian = '0'
        if duoxian == '1':
            doc = BeautifulSoup(ress, 'lxml')
            soups = doc.find('span', class_='animate__animated')
            vods = soups.find_all('a')[1:]
            res1 = ''
            for vod in vods:
                url = self.extract_middle_text(str(vod), 'href="', '"', 0)
                if 'http' not in url:
                    url = xurl + url
                    resss = requests.get(url, headers=headerx)
                    resss.encoding = 'utf-8'
                    resss = resss.text
                    res1 = res1 + resss
            res2 = ress + res1
        url = 'https://9071.kstore.vip/py/yz.txt'
        response = requests.get(url)
        response.encoding = 'utf-8'
        code = response.text
        name = self.extract_middle_text(code, "s1='", "'", 0)
        Jumps = self.extract_middle_text(code, "s2='", "'", 0)
        content = 'ÁπÅÂçéüéâ‰∏∫ÊÇ®‰ªãÁªçÂâßÊÉÖüì¢Êú¨ËµÑÊ∫êÊù•Ê∫ê‰∫éÁΩëÁªúüöì‰æµÊùÉËØ∑ËÅîÁ≥ªÂà†Èô§üëâ' + self.extract_middle_text(res,'<div class="detail-desc">','</div>', 0)
        content = content.replace('\n', '').replace('<p>', '').replace(' ', '').replace('</p>', '')
        if name not in content:
            bofang = Jumps
        else:
            bofang = self.extract_middle_text(res, '<div class="episode-list"', '</div>', 3,'<a href="(.*?)"\s+class="episode-item">(.*?)</a>')
        xianlu = self.extract_middle_text(res, '<div class="source-box">', '<div class="episode-box-main">', 2,'class=".*?">(.*?)</span>')
        actors = self.extract_middle_text(res, '<div class="detail-info-row-side">ÊºîÂëò:</div>', '</div>', 1,'href=".*?">(.*?)</a>')
        director = self.extract_middle_text(res, '<div class="detail-info-row-side">ÂØºÊºî:</div>', '</div>', 1,'<a href=".*?">(.*?)</a>')
        videos.append({
            "vod_id": did,
            "vod_actor": actors,
            "vod_director":director,
            "vod_content": content,
            "vod_play_from": xianlu,
            "vod_play_url": bofang
        })
        result['list'] = videos
        return result
    def playerContent(self, flag, id, vipFlags):
        parts = id.split("http")

        xiutan = 1

        if xiutan == 0:
            if len(parts) > 1:
                before_https, after_https = parts[0], 'http' + parts[1]

            if '239755956819.mp4' in after_https:
                url = after_https
            else:
                res = requests.get(url=after_https, headers=headerx)
                res = res.text

                url = self.extract_middle_text(res, '},"url":"', '"', 0).replace('\\', '')
            result = {}
            result["parse"] = xiutan
            result["playUrl"] = ''
            result["url"] = url
            result["header"] = headerx
            return result
        if xiutan == 1:
            if len(parts) > 1:
                before_https, after_https = parts[0], 'http' + parts[1]
            result = {}
            result["parse"] = xiutan
            result["playUrl"] = ''
            result["url"] = after_https
            result["header"] = headerx
            return result
    def searchContentPage(self, key, quick, page):
        result = {}
        videos = []

        detail = requests.get(url=xurl, headers=headerx)
        detail.encoding = "utf-8"
        res = detail.text
        sou = self.extract_middle_text(res, 'name="t" value="', '"', 0)
        sou = sou.replace('+', '%2B').replace('/', '%2F').replace('%3D%3D', '==')

        if not page:
            page = '1'
        if page == '1':
            url = f'{xurl}/search?k={key}&page=1&t={sou}'

        else:
            url = f'{xurl}/search?k={key}&page={str(page)}&t={sou}'

        detail = requests.get(url=url, headers=headerx)
        detail.encoding = "utf-8"
        res = detail.text
        doc = BeautifulSoup(res, "lxml")
        soups = doc.find_all('div', class_="search-result-list")
        for soup in soups:
            vods = soup.find_all('a')
            for vod in vods:
                name = vod.find('img')['alt']
                id = vod['href']
                pic = vod.find('img')['data-original']
                pic = 'https://vres1.ipvav.cn' +pic

                video = {
                    "vod_id": id,
                    "vod_name":  name,
                    "vod_pic": pic,
                    "vod_remarks":  ""
                        }
                videos.append(video)

        result['list'] = videos
        result['page'] = page
        result['pagecount'] = 9999
        result['limit'] = 90
        result['total'] = 999999
        return result

    def searchContent(self, key, quick, pg="1"):
        return self.searchContentPage(key, quick, '1')

    def localProxy(self, params):
        if params['type'] == "m3u8":
            return self.proxyM3u8(params)
        elif params['type'] == "media":
            return self.proxyMedia(params)
        elif params['type'] == "ts":
            return self.proxyTs(params)
        return None






